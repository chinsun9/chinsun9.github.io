<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>EJS, node express에서 도로명주소 api 사용하기 - 친성의 블로그</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="친성의 블로그"><meta name="msapplication-TileImage" content="/img/favicon-bold-color210928.svg?"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="친성의 블로그"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="nodejs express ejs로 웹을 만드는데 도로명 주소 api를 사용하게됬다 예제가 jsp밖에없어서 헤맸는데..  따라하기 이미지가 먼저 나오고 설명은 이미지 아래 적습니다! ejs에서 도로명주소 api를 사용하는 법! 간단한 express 프로젝트로 해보자!  준비물 vscode nodejs  도로명 주소 api 키 발급받기   도로명 주"><meta property="og:type" content="blog"><meta property="og:title" content="EJS, node express에서 도로명주소 api 사용하기"><meta property="og:url" content="https://chinsun9.github.io/2020/09/23/%EB%8F%84%EB%A1%9C%EB%AA%85%EC%A3%BC%EC%86%8C-api-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/"><meta property="og:site_name" content="친성의 블로그"><meta property="og:description" content="nodejs express ejs로 웹을 만드는데 도로명 주소 api를 사용하게됬다 예제가 jsp밖에없어서 헤맸는데..  따라하기 이미지가 먼저 나오고 설명은 이미지 아래 적습니다! ejs에서 도로명주소 api를 사용하는 법! 간단한 express 프로젝트로 해보자!  준비물 vscode nodejs  도로명 주소 api 키 발급받기   도로명 주"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://chinsun9.github.io/img/avatar201202.png"><meta property="article:published_time" content="2020-09-23T01:20:08.000Z"><meta property="article:modified_time" content="2021-09-26T13:47:01.161Z"><meta property="article:author" content="chinsung"><meta property="article:tag" content="api"><meta property="article:tag" content="open api"><meta property="article:tag" content="juso api"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/avatar201202.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://chinsun9.github.io/2020/09/23/%EB%8F%84%EB%A1%9C%EB%AA%85%EC%A3%BC%EC%86%8C-api-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/"},"headline":"EJS, node express에서 도로명주소 api 사용하기","image":["https://cdn.jsdelivr.net/gh/chinsun9/chinsun9.github.io@master/images/%EB%8F%84%EB%A1%9C%EB%AA%85%EC%A3%BC%EC%86%8C-api-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B020200923/preview.jpg"],"datePublished":"2020-09-23T01:20:08.000Z","dateModified":"2021-09-26T13:47:01.161Z","author":{"@type":"Person","name":"chinsung"},"publisher":{"@type":"Organization","name":"친성의 블로그","logo":{"@type":"ImageObject","url":"https://chinsun9.github.io/img/favicon-bold-color210928.svg?"}},"description":"nodejs express ejs로 웹을 만드는데 도로명 주소 api를 사용하게됬다 예제가 jsp밖에없어서 헤맸는데..  따라하기 이미지가 먼저 나오고 설명은 이미지 아래 적습니다! ejs에서 도로명주소 api를 사용하는 법! 간단한 express 프로젝트로 해보자!  준비물 vscode nodejs  도로명 주소 api 키 발급받기   도로명 주"}</script><link rel="canonical" href="https://chinsun9.github.io/2020/09/23/%EB%8F%84%EB%A1%9C%EB%AA%85%EC%A3%BC%EC%86%8C-api-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/"><link rel="alternate" href="/rss2.xml" title="친성의 블로그" type="application/atom+xml"><link rel="icon" href="/img/favicon-bold-color210928.svg?"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/vs2015.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400&amp;family=Roboto" rel="stylesheet"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/chinsun9/chinsun9.github.io@0571b0e67ca025f249e4139cea14674b0ebf2c13/css/default.css"><script src="https://cdn.jsdelivr.net/gh/chinsun9/chinsun9.github.io@0571b0e67ca025f249e4139cea14674b0ebf2c13/js/theme.js"></script><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-D5DSX529EH" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-D5DSX529EH');</script><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://cdn.jsdelivr.net/gh/chinsun9/chinsun9.github.io@master/img/favicon-bold-color210928.svg?" alt="친성의 블로그" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a><a class="navbar-item" href="/project">Project</a></div><div class="navbar-end"><button class="navbar-item" type="button" id="toggleThemeButton">🌞</button><a class="navbar-item is-hidden-tablet catalogue" title="카탈로그" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-9-tablet is-9-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-09-23T01:20:08.000Z" title="2020. 9. 23. 오전 10:20:08">2020-09-23</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-09-26T13:47:01.161Z" title="2021. 9. 26. 오후 10:47:01">2021-09-26</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/using-api/">using api</a></span><span class="level-item">9분안에 읽기 (약 1302 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile">EJS, node express에서 도로명주소 api 사용하기</h1><div class="content"><img src="https://cdn.jsdelivr.net/gh/chinsun9/chinsun9.github.io@master/images/도로명주소-api-사용하기20200923/preview.jpg">

<div class="video-container"><iframe src="https://www.youtube.com/embed/mnyZ_sLhlfE" frameborder="0" loading="lazy" allowfullscreen></iframe></div>

<ul>
<li>nodejs express ejs로 웹을 만드는데 도로명 주소 api를 사용하게됬다</li>
<li>예제가 jsp밖에없어서 헤맸는데..</li>
</ul>
<h2 id="따라하기"><a href="#따라하기" class="headerlink" title="따라하기"></a>따라하기</h2><ul>
<li><em>이미지가 먼저 나오고 설명은 이미지 아래 적습니다!</em></li>
<li>ejs에서 도로명주소 api를 사용하는 법! 간단한 express 프로젝트로 해보자!</li>
</ul>
<h3 id="준비물"><a href="#준비물" class="headerlink" title="준비물"></a>준비물</h3><ul>
<li>vscode</li>
<li>nodejs</li>
</ul>
<h3 id="도로명-주소-api-키-발급받기"><a href="#도로명-주소-api-키-발급받기" class="headerlink" title="도로명 주소 api 키 발급받기"></a>도로명 주소 api 키 발급받기</h3><img src="https://cdn.jsdelivr.net/gh/chinsun9/chinsun9.github.io@master/images/도로명주소-api-사용하기20200923/1.jpg">

<ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.juso.go.kr/addrlink/devAddrLinkRequestWrite.do?returnFn=write&cntcMenu=URL">도로명 주소 api 신청하기</a></li>
<li>신청폼을 작성한다</li>
<li>서비스폼은 개발로 선택하면 별도 인증없이 발급받을 수 있다. 공부할때 딱이다!</li>
</ul>
<br>
<img src="https://cdn.jsdelivr.net/gh/chinsun9/chinsun9.github.io@master/images/도로명주소-api-사용하기20200923/2.jpg">

<ul>
<li>신청 버튼을 누르고 나면, 빨간색 폰트로 승인키가 보일것이다</li>
<li>승인키를 복사하여 메모해둔다!</li>
</ul>
<h3 id="express-generator로-프로젝트-생성"><a href="#express-generator로-프로젝트-생성" class="headerlink" title="express generator로 프로젝트 생성"></a>express generator로 프로젝트 생성</h3><ul>
<li>여기부터 vscode을 열고 작업합니다</li>
</ul>
<figure class="highlight cmd"><figcaption><span>cmd</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i express-generator -g</span><br></pre></td></tr></table></figure>

<ul>
<li>express-generator를 전역설치한다</li>
</ul>
<figure class="highlight cmd"><figcaption><span>cmd</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">express juso-api-practice --view=ejs</span><br></pre></td></tr></table></figure>

<figure class="highlight cmd"><figcaption><span>cmd log</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">change directory:</span><br><span class="line">  &gt; <span class="built_in">cd</span> juso-api-practice</span><br><span class="line"></span><br><span class="line">install dependencies:</span><br><span class="line">  &gt; npm install</span><br><span class="line"></span><br><span class="line">run the app:</span><br><span class="line">  &gt; <span class="built_in">SET</span> DEBUG=juso-api-practice:* &amp; npm <span class="built_in">start</span></span><br></pre></td></tr></table></figure>

<ul>
<li>이런 메시지가 나오면 성공한거다</li>
<li>메시지 대로 수행해보자</li>
</ul>
<figure class="highlight cmd"><figcaption><span>cmd</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> juso-api-practice</span><br><span class="line">npm i</span><br><span class="line"><span class="built_in">SET</span> DEBUG=juso-api-practice:* &amp; npm <span class="built_in">start</span></span><br></pre></td></tr></table></figure>

<figure class="highlight cmd"><figcaption><span>cmd log</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\<span class="title">tmp</span>\<span class="title">juso</span>-<span class="title">api</span>-<span class="title">practice</span>&gt;<span class="title">SET</span> <span class="title">DEBUG</span>=<span class="title">juso</span>-<span class="title">api</span>-<span class="title">practice</span>:* &amp; <span class="title">npm</span> <span class="title">start</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&gt; <span class="title">juso</span>-<span class="title">api</span>-<span class="title">practice</span>@0.0.0 <span class="title">start</span> <span class="title">C</span>:\<span class="title">tmp</span>\<span class="title">juso</span>-<span class="title">api</span>-<span class="title">practice</span></span></span><br><span class="line"><span class="function">&gt; <span class="title">node</span> ./<span class="title">bin</span>/<span class="title">www</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">  <span class="title">juso</span>-<span class="title">api</span>-<span class="title">practice:server</span> <span class="title">Listening</span> <span class="title">on</span> <span class="title">port</span> 3000 +0<span class="title">ms</span></span></span><br></pre></td></tr></table></figure>

<img src="https://cdn.jsdelivr.net/gh/chinsun9/chinsun9.github.io@master/images/도로명주소-api-사용하기20200923/3.jpg">

<ul>
<li>여기까지 되면 <a target="_blank" rel="external nofollow noopener noreferrer" href="http://localhost:3000/">http://localhost:3000/</a> 에 접속해서 잘 실행되는지 확인한다</li>
</ul>
<h3 id="주소-입력할-폼-만들기"><a href="#주소-입력할-폼-만들기" class="headerlink" title="주소 입력할 폼 만들기"></a>주소 입력할 폼 만들기</h3><img src="https://cdn.jsdelivr.net/gh/chinsun9/chinsun9.github.io@master/images/도로명주소-api-사용하기20200923/4.jpg">

<ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="http://www.juso.go.kr/addrlink/devAddrLinkRequestGuide.do?menu=roadApi">jsp 소스</a>를 참고하여 만들었다</li>
</ul>
<figure class="highlight plain"><figcaption><span>view/index.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;&lt;%&#x3D; title %&gt;&lt;&#x2F;title&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;&#x2F;stylesheets&#x2F;style.css&quot; &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h1&gt;&lt;%&#x3D; title %&gt;&lt;&#x2F;h1&gt;</span><br><span class="line">    &lt;p&gt;Welcome to &lt;%&#x3D; title %&gt;&lt;&#x2F;p&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;form name&#x3D;&quot;form&quot;&gt;</span><br><span class="line">        &lt;input name&#x3D;&quot;roadAddrPart1&quot; type&#x3D;&quot;text&quot; placeholder&#x3D;&quot;도로명주소&quot; &#x2F;&gt;</span><br><span class="line">        &lt;input name&#x3D;&quot;addrDetail&quot; type&#x3D;&quot;text&quot; placeholder&#x3D;&quot;고객입력 상세주소&quot; &#x2F;&gt;</span><br><span class="line">        &lt;input name&#x3D;&quot;zipNo&quot; type&#x3D;&quot;text&quot; placeholder&#x3D;&quot;우편번호&quot; &#x2F;&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot;주소검색&quot; onclick&#x3D;&quot;goPopup()&quot; &#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;form&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;script language&#x3D;&quot;javascript&quot;&gt;</span><br><span class="line">      function goPopup() &#123;</span><br><span class="line">        var pop &#x3D; window.open(</span><br><span class="line">          &#39;&#x2F;popup&#x2F;jusoPopup&#39;,</span><br><span class="line">          &#39;pop&#39;,</span><br><span class="line">          &#39;width&#x3D;570,height&#x3D;420, scrollbars&#x3D;yes, resizable&#x3D;yes&#39;</span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line">      function jusoCallBack(</span><br><span class="line">        roadFullAddr,</span><br><span class="line">        roadAddrPart1,</span><br><span class="line">        addrDetail,</span><br><span class="line">        roadAddrPart2,</span><br><span class="line">        engAddr,</span><br><span class="line">        jibunAddr,</span><br><span class="line">        zipNo,</span><br><span class="line">        admCd,</span><br><span class="line">        rnMgtSn,</span><br><span class="line">        bdMgtSn,</span><br><span class="line">        detBdNmList,</span><br><span class="line">        bdNm,</span><br><span class="line">        bdKdcd,</span><br><span class="line">        siNm,</span><br><span class="line">        sggNm,</span><br><span class="line">        emdNm,</span><br><span class="line">        liNm,</span><br><span class="line">        rn,</span><br><span class="line">        udrtYn,</span><br><span class="line">        buldMnnm,</span><br><span class="line">        buldSlno,</span><br><span class="line">        mtYn,</span><br><span class="line">        lnbrMnnm,</span><br><span class="line">        lnbrSlno,</span><br><span class="line">        emdNo</span><br><span class="line">      ) &#123;</span><br><span class="line">        &#x2F;&#x2F; 팝업페이지에서 주소입력한 정보를 받아서, 현 페이지에 정보를 등록합니다</span><br><span class="line">        document.form.roadAddrPart1.value &#x3D; roadAddrPart1;</span><br><span class="line">        document.form.addrDetail.value &#x3D; addrDetail;</span><br><span class="line">        document.form.zipNo.value &#x3D; zipNo;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line">  &lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>view/index.ejs를 위 소스로 덮어쓴다</li>
<li>이제 새로운 view파일을 만든다</li>
</ul>
<h3 id="도로명-주소-검색-팝업용-view파일-생성"><a href="#도로명-주소-검색-팝업용-view파일-생성" class="headerlink" title="도로명 주소 검색 팝업용 view파일 생성"></a>도로명 주소 검색 팝업용 view파일 생성</h3><figure class="highlight plain"><figcaption><span>view/jusoPopup.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html PUBLIC &quot;-&#x2F;&#x2F;W3C&#x2F;&#x2F;DTD HTML 4.01 Transitional&#x2F;&#x2F;EN&quot; &quot;http:&#x2F;&#x2F;www.w3.org&#x2F;TR&#x2F;html4&#x2F;loose.dtd&quot;&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta http-equiv&#x3D;&quot;Content-Type&quot; content&#x3D;&quot;text&#x2F;html; charset&#x3D;UTF-8&quot; &#x2F;&gt;</span><br><span class="line">    &lt;title&gt;Insert title here&lt;&#x2F;title&gt;</span><br><span class="line">	&lt;%</span><br><span class="line">	const &#123;</span><br><span class="line">		inputYn,</span><br><span class="line">		roadFullAddr,</span><br><span class="line">		roadAddrPart1,</span><br><span class="line">		roadAddrPart2,</span><br><span class="line">		engAddr,</span><br><span class="line">		jibunAddr,</span><br><span class="line">		zipNo,</span><br><span class="line">		addrDetail,</span><br><span class="line">		admCd,</span><br><span class="line">		rnMgtSn,</span><br><span class="line">		bdMgtSn,</span><br><span class="line">		detBdNmList,</span><br><span class="line">		bdNm,</span><br><span class="line">		bdKdcd,</span><br><span class="line">		sggNm,</span><br><span class="line">		emdNm,</span><br><span class="line">		rn,</span><br><span class="line">		udrtYn,</span><br><span class="line">		buldMnnm,</span><br><span class="line">		buldSlno,</span><br><span class="line">		mtYn,</span><br><span class="line">		lnbrMnnm,</span><br><span class="line">		lnbrSlno,</span><br><span class="line">		emdNo,</span><br><span class="line">		siNm,</span><br><span class="line">		liNm,</span><br><span class="line">	&#125; &#x3D; locals;</span><br><span class="line">	%&gt;</span><br><span class="line">  &lt;&#x2F;head&gt;</span><br><span class="line">  &lt;script language&#x3D;&quot;javascript&quot;&gt;</span><br><span class="line">    &#x2F;&#x2F;   document.domain &#x3D; &#39;localhost&#39;;</span><br><span class="line"></span><br><span class="line">    function init() &#123;</span><br><span class="line">      var url &#x3D; location.href;</span><br><span class="line">      var confmKey &#x3D; &#39;devU01TX0FVVEgyMDIwMDkyMzE0NDY0NjExMDIyNDQ&#x3D;&#39;;</span><br><span class="line">      var resultType &#x3D; &#39;4&#39;; &#x2F;&#x2F; 도로명주소 검색결과 화면 출력내용, 1 : 도로명, 2 : 도로명+지번, 3 : 도로명+상세건물명, 4 : 도로명+지번+상세건물명</span><br><span class="line">      var inputYn &#x3D; &#39;&lt;%&#x3D;inputYn%&gt;&#39;;</span><br><span class="line">      if (inputYn !&#x3D; &#39;Y&#39;) &#123;</span><br><span class="line">        document.form.confmKey.value &#x3D; confmKey;</span><br><span class="line">        document.form.returnUrl.value &#x3D; url;</span><br><span class="line">        document.form.resultType.value &#x3D; resultType;</span><br><span class="line">        document.form.action &#x3D; &#39;http:&#x2F;&#x2F;www.juso.go.kr&#x2F;addrlink&#x2F;addrLinkUrl.do&#39;; &#x2F;&#x2F;인터넷망</span><br><span class="line">        &#x2F;&#x2F;document.form.action&#x3D;&quot;http:&#x2F;&#x2F;www.juso.go.kr&#x2F;addrlink&#x2F;addrMobileLinkUrl.do&quot;; &#x2F;&#x2F;모바일 웹인 경우, 인터넷망</span><br><span class="line">        document.form.submit();</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        opener.jusoCallBack(</span><br><span class="line">          &#39;&lt;%&#x3D;roadFullAddr%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;roadAddrPart1%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;addrDetail%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;roadAddrPart2%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;engAddr%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;jibunAddr%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;zipNo%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;admCd%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;rnMgtSn%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;bdMgtSn%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;detBdNmList%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;bdNm%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;bdKdcd%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;siNm%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;sggNm%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;emdNm%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;liNm%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;rn%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;udrtYn%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;buldMnnm%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;buldSlno%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;mtYn%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;lnbrMnnm%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;lnbrSlno%&gt;&#39;,</span><br><span class="line">          &#39;&lt;%&#x3D;emdNo%&gt;&#39;</span><br><span class="line">        );</span><br><span class="line">        window.close();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;&#x2F;script&gt;</span><br><span class="line">  &lt;body onload&#x3D;&quot;init();&quot;&gt;</span><br><span class="line">    &lt;form id&#x3D;&quot;form&quot; name&#x3D;&quot;form&quot; method&#x3D;&quot;post&quot;&gt;</span><br><span class="line">      &lt;input type&#x3D;&quot;hidden&quot; id&#x3D;&quot;confmKey&quot; name&#x3D;&quot;confmKey&quot; value&#x3D;&quot;&quot; &#x2F;&gt;</span><br><span class="line">      &lt;input type&#x3D;&quot;hidden&quot; id&#x3D;&quot;returnUrl&quot; name&#x3D;&quot;returnUrl&quot; value&#x3D;&quot;&quot; &#x2F;&gt;</span><br><span class="line">      &lt;input type&#x3D;&quot;hidden&quot; id&#x3D;&quot;resultType&quot; name&#x3D;&quot;resultType&quot; value&#x3D;&quot;&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;form&gt;</span><br><span class="line">  &lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>이 <em>jusoPopup.ejs</em> 가 index view에서 버튼을 누르면 등장하는 팝업이다</li>
<li>view/jusoPopup.ejs 이름으로 만든다</li>
<li>이제 라우터를 수정하자</li>
</ul>
<h3 id="api가-잘-동작하도록-라우터-수정"><a href="#api가-잘-동작하도록-라우터-수정" class="headerlink" title="api가 잘 동작하도록 라우터 수정"></a>api가 잘 동작하도록 라우터 수정</h3><figure class="highlight js"><figcaption><span>routes/index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.Router();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* GET home page. */</span></span><br><span class="line">router.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  res.render(<span class="string">&#x27;index&#x27;</span>, &#123; <span class="attr">title</span>: <span class="string">&#x27;Express&#x27;</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/popup/jusoPopup&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.render(<span class="string">&#x27;jusoPopup&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">&#x27;/popup/jusoPopup&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.locals = req.body;</span><br><span class="line">  res.render(<span class="string">&#x27;jusoPopup&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure>

<ul>
<li>routes/index.js를 위 소스로 덮어쓴다</li>
<li>/popup/jusoPopup 라우트를 추가해줬다</li>
</ul>
<h3 id="동작-구조-설명"><a href="#동작-구조-설명" class="headerlink" title="동작 구조 설명"></a>동작 구조 설명</h3><img src="https://cdn.jsdelivr.net/gh/chinsun9/chinsun9.github.io@master/images/도로명주소-api-사용하기20200923/5.jpg">

<ul>
<li>그림으로 표현해봤다.. <del>그리고보니 엄청 더럽네..</del></li>
<li>jusoPopup.ejs는 2가지 일을하는 놈이다</li>
<li>도로명주소 검색창을 보여주거나, 입력폼으로 도로명주소 결과를 전달한다</li>
<li><code>inputYn</code> 이라는 변수가 있는데, 이 변수에 따라 동작 여부가 갈린다<ul>
<li>index화면에서 주소검색 버튼을 눌러 켜면 get으로 주소팝업을 불러온다. 그러면 <code>inputYn</code> 변수가 초기화 되지 않아있다<ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="http://www.juso.go.kr/addrlink/addrLinkUrl.do">http://www.juso.go.kr/addrlink/addrLinkUrl.do</a> 로 자동으로 도로명주소 api를 통해 검색화면을 불러온다</li>
<li>사용자가 검색화면에서 검색어를 입력하면 <a target="_blank" rel="external nofollow noopener noreferrer" href="http://www.juso.go.kr/addrlink/addrLinkUrlSearch.do">http://www.juso.go.kr/addrlink/addrLinkUrlSearch.do</a> 로 도로명주소 api를 통해 검색결과를 받아온다</li>
<li>결과중 하나를 선택하고 상세주소를 입력하고 마지막으로 주소입력 버튼을 누르면, post로 주소팝업을 불러온다. 이때 검색결과를 같이 넘긴다</li>
</ul>
</li>
<li>post로 주소팝업을 부르면 라우터에서는 수신받은 검색결과를 다시 리스폰객체에 담아서 보내준다. 그러면 <code>inputYn</code> 변수가 초기화 되어있다<ul>
<li><code>inputYn</code>가 <code>Y</code> 일때, 부모창(index.ejs)에 jusoCallBack()함수를 실행시키는데, 이때 인자로 검색결과를 넘기는 것이다</li>
</ul>
</li>
</ul>
</li>
<li>그러면 index.ejs의 jusoCallBack()에서 검색결과값을 가지고 인풋을 덮었는 것이다</li>
</ul>
<h3 id="여기까지-프로젝트-소스"><a href="#여기까지-프로젝트-소스" class="headerlink" title="여기까지 프로젝트 소스"></a><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/chinsun9/nodejs-ejs-juso-api-practice">여기까지 프로젝트 소스</a></h3><h2 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h2><ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/chinsun9/2020-web-test">도로명주소api를 활용한 웹 프로젝트</a></li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>EJS, node express에서 도로명주소 api 사용하기</p><p><a href="https://chinsun9.github.io/2020/09/23/도로명주소-api-사용하기/">https://chinsun9.github.io/2020/09/23/도로명주소-api-사용하기/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>chinsung</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2020-09-23</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2021-09-26</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="external nofollow noopener noreferrer" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="external nofollow noopener noreferrer" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="external nofollow noopener noreferrer" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/api/">api</a><a class="link-muted mr-2" rel="tag" href="/tags/open-api/">open api</a><a class="link-muted mr-2" rel="tag" href="/tags/juso-api/">juso api</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/09/23/%EB%82%B4-github-blog-%EA%B8%80%EC%9D%B4-%EA%B5%AC%EA%B8%80-%EA%B2%80%EC%83%89%EC%97%90-%EB%82%98%EC%98%A4%EB%8A%94-%EB%B2%95/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">내 github blog 글이 구글 검색에 나오는 법</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/09/23/%EC%BD%94%EB%93%9C-%EC%8A%A4%EB%8B%88%ED%8E%AB-%EC%95%88%EC%97%90-%EC%BD%94%EB%93%9C-%EC%8A%A4%EB%8B%88%ED%8E%AB-%ED%8F%AC%ED%95%A8%ED%95%98%EA%B8%B0/"><span class="level-item">코드 스니펫 안에 ``` 포함하기</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">댓글</h3><script src="https://utteranc.es/client.js" repo="chinsun9/chinsun9.github.io" issue-term="pathname" label="blog comments" theme="github-light" crossorigin="anonymous" async></script></div></div></div><div class="column column-left is-3-tablet is-3-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">카탈로그</h3><ul class="menu-list"><li><a class="level is-mobile" href="#따라하기"><span class="level-left"><span class="level-item">1</span><span class="level-item">따라하기</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#준비물"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">준비물</span></span></a></li><li><a class="level is-mobile" href="#도로명-주소-api-키-발급받기"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">도로명 주소 api 키 발급받기</span></span></a></li><li><a class="level is-mobile" href="#express-generator로-프로젝트-생성"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">express generator로 프로젝트 생성</span></span></a></li><li><a class="level is-mobile" href="#주소-입력할-폼-만들기"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">주소 입력할 폼 만들기</span></span></a></li><li><a class="level is-mobile" href="#도로명-주소-검색-팝업용-view파일-생성"><span class="level-left"><span class="level-item">1.5</span><span class="level-item">도로명 주소 검색 팝업용 view파일 생성</span></span></a></li><li><a class="level is-mobile" href="#api가-잘-동작하도록-라우터-수정"><span class="level-left"><span class="level-item">1.6</span><span class="level-item">api가 잘 동작하도록 라우터 수정</span></span></a></li><li><a class="level is-mobile" href="#동작-구조-설명"><span class="level-left"><span class="level-item">1.7</span><span class="level-item">동작 구조 설명</span></span></a></li><li><a class="level is-mobile" href="#여기까지-프로젝트-소스"><span class="level-left"><span class="level-item">1.8</span><span class="level-item">여기까지 프로젝트 소스</span></span></a></li></ul></li><li><a class="level is-mobile" href="#참고"><span class="level-left"><span class="level-item">2</span><span class="level-item">참고</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://cdn.jsdelivr.net/gh/chinsun9/chinsun9.github.io@master/img/favicon-bold-color210928.svg?" alt="친성의 블로그" height="28"></a><p class="is-size-7"><span>&copy; 2022 chinsung</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="external nofollow noopener noreferrer">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="chinsun9&#039;s GitHub" href="https://github.com/chinsun9"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/gh/chinsun9/chinsun9.github.io@master/js/column.js"></script><script src="https://cdn.jsdelivr.net/gh/chinsun9/chinsun9.github.io@master/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="https://cdn.jsdelivr.net/gh/chinsun9/chinsun9.github.io@master/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/gh/chinsun9/chinsun9.github.io@master/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목 없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script></body></html>